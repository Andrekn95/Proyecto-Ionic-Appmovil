<ion-content class="ion-padding login-container">
  <h2 class="ion-text-center">Inicio de Sesi√≥n</h2>

  <form [formGroup]="formRegister" (ngSubmit)="onSubmit()" novalidate>

    <ion-item>
      <ion-label position="floating">Correo institucional</ion-label>
      <ion-input
        type="email"
        formControlName="username"
        placeholder="ejemplo@yavirac.edu.ec">
      </ion-input>
    </ion-item>

    @if (username?.touched || username?.dirty) {
      @if (username?.errors?.['required']) {
        <ion-text color="danger"><p>El correo es obligatorio.</p></ion-text>
      }
      @else if (username?.errors?.['email']) {
        <ion-text color="danger"><p>Debe ingresar un correo v√°lido.</p></ion-text>
      }
      @else if (username?.errors?.['pattern']) {
        <ion-text color="danger"><p>El correo debe terminar en @yavirac.edu.ec.</p></ion-text>
      }
    }

    <!-- üîπ Campo Password -->
    <ion-item>
      <ion-label position="floating">Contrase√±a</ion-label>
      <ion-input
        type="password"
        formControlName="password"
        placeholder="Ingrese su contrase√±a">
      </ion-input>
    </ion-item>

    @if (password?.touched || password?.dirty) {
      @if (password?.errors?.['required']) {
        <ion-text color="danger"><p>La contrase√±a es obligatoria.</p></ion-text>
      }
      @else if (password?.errors?.['minlength']) {
        <ion-text color="danger"><p>Debe tener al menos 6 caracteres.</p></ion-text>
      }
      @else if (password?.errors?.['pattern']) {
        <ion-text color="danger"><p>Debe contener el signo "$".</p></ion-text>
      }
    }

    <!-- üîπ Campo Confirmar contrase√±a -->
    <ion-item>
      <ion-label position="floating">Confirmar contrase√±a</ion-label>
      <ion-input
        type="password"
        formControlName="confirm"
        placeholder="Repita su contrase√±a">
      </ion-input>
    </ion-item>

    @if (confirm?.touched || confirm?.dirty) {
      @if (confirm?.errors?.['required']) {
        <ion-text color="danger"><p>Debe confirmar la contrase√±a.</p></ion-text>
      }
    }

    @if (password?.value && confirm?.value) {
      @if (password?.value !== confirm?.value) {
        <ion-text color="danger">
          <p>‚ùå Las contrase√±as no coinciden.</p>
        </ion-text>
      }
      @else {
        <ion-text color="success">
          <p>‚úÖ Las contrase√±as coinciden correctamente.</p>
        </ion-text>
      }
    }

    <ion-button
      expand="block"
      type="submit"
      [disabled]="formRegister.invalid"
      color="primary"
      class="ion-margin-top">
      Iniciar sesi√≥n
    </ion-button>
  </form>
</ion-content>
